---
title: kubernetesä½¿ã£ã¦ã¿ãŸï¼
type: "tech"
emoji: "ğŸ"
published: true
topics: ["kubernetes"]
---

## æ¦‚è¦

ã¼ããŒåˆã‚ã¦k8sè§¦ã£ãŸã“ã¨ã‚’ã“ã“ã«ãƒ¡ãƒ¢ã—ã¾ã™ã€‚

## kubeadmãªã©ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«åŠã³ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```sh
curl -fsSL https://gist.github.com/inductor/0f9082e8f4574654759c533a9fe57b0d/raw/733405420b91da820df805f8eb20dc6596f28984/kubeadm-setup-ubuntu.sh | sh
```

ã‚’å®Ÿè¡Œã€ã‚ã‚Œï¼Ÿãªã‚“ã‹DNSæ­»ã‚“ã ãã€ã€ã€ï¼Ÿ

ã¨ã„ã†ã‚ã‘ã§ã€ã‚ã‚‹äººã«è³ªå•ã—ã¦ä¿®æ­£ã—ãŸã®ãŒã“ã¡ã‚‰ï¼

```sh
curl -fsSL https://gist.github.com/tuna2134/9b4deca0ac3e122517cdf1d34766449f/raw/c33479389ff3602e22ec8fc836bdd2c739246792/kubeadm-setup-ubuntu.sh | sh
```

ãŠã€ã„ã‘ãŸï¼ã¡ãªã¿ã«ã“ã‚Œã‚‰ã¯kubeadmãªã©ã‚’è‡ªå‹•çš„ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«åŠã³ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¦ãã‚Œã‚‹å„ªã‚Œã‚‚ã®ã§ã™ã€‚

PVMé–¢é€£ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ã€‚

```sh
kubectl apply -f https://openebs.github.io/charts/openebs-operator.yaml
```

ã“ã‚Œã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å¤šåˆ†çµ‚ã‚ã£ãŸã€ã€ã€

## Nodeã‚’ç„¡åŠ¹ã«ã™ã‚‹?

```sh
kubectl edit node <ãƒ›ã‚¹ãƒˆå>
```

ãã†ã™ã‚‹ã¨ç·¨é›†ç”»é¢ãŒå‡ºã‚‹ã®ã§ã€`node-role.kubernetes.io/control-plane`ã‚’å‰Šé™¤ã—ã¾ã™ã€‚

ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—çµ‚äº†ï¼

## æ—©é€Ÿãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’è§¦ã‚‹

ã¾ãšãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã¨ã¯ï¼Ÿ

ã¾ã‚ã„ã‚ã°è¨­å®šãªã©ã‚’è¦æ±‚ã™ã‚‹æ³¨æ–‡æ›¸ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚

k8så…¬å¼ã«ã‚ã‚‹nginxã®deploymentã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ï¼

```yaml:nginx.yml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
  labels:
    app: nginx
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.14.2
        ports:
        - containerPort: 80
```

ã“ã‚Œã¯nginxã£ã¦ã„ã†ã‚³ãƒ³ãƒ†ãƒŠã‚’ï¼“ã¤å‹•ã‹ã™ã‚‚ã®ã§ã™ã€‚

## ãƒ‡ãƒ—ãƒ­ã‚¤

```sh
kubectl apply -f nginx.yml
```

ã“ã‚Œã§ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã™ã€‚

## ã¾ã¨ã‚

ã¾ã ã¾ã k8sã«ã¤ã„ã¦å…¨ç„¶ã§ãã¦ã„ãªã„ã¨æ€ã†ã®ã§ã€ã„ã¤ã‹kubevirtãªã©ã«è§¦ã‚Œãƒã‚¹ã‚¿ãƒ¼ã—ã¦ã„ããŸã„ã€‚